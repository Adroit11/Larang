!function(){"use strict";angular.module("timeTracker",["ngResource","ui.bootstrap"])}();
!function(){"use strict";function TimeEntry(time){function updateTotalTime(timeEntries){vm.totalTime=time.getTotalTime(timeEntries)}var vm=this;vm.timeEntries=[],vm.totalTime={},vm.clockIn=new Date,vm.clockOut=new Date,time.getTime().then(function(results){vm.timeEntries=results,updateTotalTime(vm.timeEntries)},function(error){console.log(error)}),vm.logNewTime=function(){return vm.clockOut<vm.clockIn?void alert("You can't clock out before you clock in!"):vm.clockOut-vm.clockIn===0?void alert("Your time entry has to be greater than zero!"):(vm.timeEntries.push({user_id:1,user_firstname:"Ryan",user_lastname:"Chenkie",start_time:vm.clockIn,end_time:vm.clockOut,loggedTime:time.getTimeDiff(vm.clockIn,vm.clockOut),comment:vm.comment}),updateTotalTime(vm.timeEntries),void(vm.comment=""))}}angular.module("timeTracker").controller("TimeEntry",TimeEntry)}();
!function(){"use strict";function time($resource){function getTime(){return Time.query().$promise.then(function(results){return angular.forEach(results,function(result){result.loggedTime=getTimeDiff(result.start_time,result.end_time)}),results},function(error){console.log(error)})}function getTimeDiff(start,end){var diff=moment(end).diff(moment(start)),duration=moment.duration(diff);return{duration:duration}}function getTotalTime(timeEntries){var totalMilliseconds=0;return angular.forEach(timeEntries,function(key){totalMilliseconds+=key.loggedTime.duration._milliseconds}),{hours:Math.floor(moment.duration(totalMilliseconds).asHours()),minutes:moment.duration(totalMilliseconds).minutes()}}var Time=$resource("/time.json");return{getTime:getTime,getTimeDiff:getTimeDiff,getTotalTime:getTotalTime}}angular.module("timeTracker").factory("time",time)}();